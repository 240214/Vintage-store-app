(function(s){jQuery(document).ready(function(t){const e={options:{},vars:{ww:0,wh:0},labels:{},messages:{ajax_error:"SYSTEM TECHNICAL ERROR"},routes:{remove_link:"link-remove"},els:{},Core:{Init:function(){this.initEvents(),this.eventResizeWindow()},initEvents:function(){t(window).on("scroll",e.Core.eventScrollWindow).on("resize orientationchange deviceorientation",e.Core.eventResizeWindow),t(document).on("blur",'[data-trigger="js_action_blur"]',e.Core.doAction).on("change",'[data-trigger="js_action_change"]',e.Core.doAction).on("click",'[data-trigger="js_action_click"]',e.Core.doAction).on("submit",'[data-trigger="js_action_submit"]',e.Core.doAction)},eventResizeWindow:function(){e.vars.ww=t(window).width(),e.vars.wh=t(window).height()},doAction:function(n){const o=t(this);switch(t(this).data("action")){case"validate_uploader_form":e.Uploader.validate(o);break;case"submit_uploader_form":break;case"delete_link":e.Links.remove(o);break}n.preventDefault()}},Common:{createAjaxUrl:function(n){return t('meta[name="baseurl"]').attr("content")+"/"+n}},Uploader:{init:function(){},validate:function(n){let o=n.parents("form"),a=o.find('input[type="file"]'),i=!0;return a.each(function(d,r){console.log(t(r).get(0).files.length),t(r).get(0).files.length===0&&(i=!1)}),i&&o.submit(),console.log(o.data("validate")),i},submit:function(n){}},Links:{remove:function(n){let o=n.data("id"),a=t(n.data("parent"));t.ajax({type:"POST",url:e.Common.createAjaxUrl(e.routes.remove_link),headers:{"X-CSRF-TOKEN":t('meta[name="csrf-token"]').attr("content")},data:{id:o},dataType:"json",beforeSend:function(i){n.attr("disabled",!0).find("span").text("Removing...")}}).done(function(i){i.error==0&&(a.find("ol").addClass("line-through color-gray"),setTimeout(function(){n.addClass("hidden")},1e3))}).fail(function(){n.attr("disabled",!1).find("span").text("Remove"),console.log(e.messages.ajax_error)})}}};e.Core.Init()})})(jQuery);
