(function(s){jQuery(document).ready(function(a){const e={options:{},vars:{ww:0,wh:0},labels:{},messages:{ajax_error:"SYSTEM TECHNICAL ERROR"},routes:{remove_sale:"sales-remove"},els:{},Core:{Init:function(){this.initEvents(),this.eventResizeWindow()},initEvents:function(){a(window).on("scroll",e.Core.eventScrollWindow).on("resize orientationchange deviceorientation",e.Core.eventResizeWindow),a(document).on("blur",'[data-trigger="js_action_blur"]',e.Core.doAction).on("change",'[data-trigger="js_action_change"]',e.Core.doAction).on("click",'[data-trigger="js_action_click"]',e.Core.doAction).on("submit",'[data-trigger="js_action_submit"]',e.Core.doAction)},eventResizeWindow:function(){e.vars.ww=a(window).width(),e.vars.wh=a(window).height()},doAction:function(t){const n=a(this);switch(a(this).data("action")){case"validate_uploader_form":e.Uploader.validate(n);break;case"submit_uploader_form":break;case"delete_sale":e.Sales.remove(n);break;case"copy_to_clipboard":e.Common.copyToClipboard(n);break}t.preventDefault()}},Common:{createAjaxUrl:function(t){return a('meta[name="baseurl"]').attr("content")+"/"+t},copyToClipboard:function(t){let n=a(t.data("source")),i=n.text();if(navigator&&navigator.clipboard&&navigator.clipboard.writeText)return navigator.clipboard.writeText(i);{const o=document.createElement("textarea");o.value=i,o.setAttribute("readonly",""),o.style.position="absolute",o.style.left="-9999px",document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o)}n.addClass("color-red")}},Uploader:{init:function(){},validate:function(t){let n=t.parents("form"),i=n.find('input[type="file"]'),o=!0;return i.each(function(l,r){console.log(a(r).get(0).files.length),a(r).get(0).files.length===0&&(o=!1)}),o&&n.submit(),console.log(n.data("validate")),o},submit:function(t){}},Sales:{remove:function(t){let n=t.data("id"),i=a(t.data("parent"));a.ajax({type:"POST",url:e.Common.createAjaxUrl(e.routes.remove_sale),headers:{"X-CSRF-TOKEN":a('meta[name="csrf-token"]').attr("content")},data:{id:n},dataType:"json",beforeSend:function(o){t.attr("disabled",!0).find("span").text("Removing...")}}).done(function(o){o.error==0&&(i.find("ol").addClass("line-through color-gray"),setTimeout(function(){t.addClass("hidden")},1e3))}).fail(function(){t.attr("disabled",!1).find("span").text("Remove"),console.log(e.messages.ajax_error)})}}};e.Core.Init()})})(jQuery);
